<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Focus Arena ‚Äì Classic</title>

<style>
*{
font-family: monospace;
transition:.25s;
box-sizing:border-box;
}

body{
margin:0;
background:#1a1a1a;
color:#eaeaea;
text-align:center;
}

body.night{
background:#0b0b0b;
color:#b6c6c6;
}

header{
background:#111;
padding:14px;
font-size:1.5em;
letter-spacing:2px;
border-bottom:2px solid #333;
}

nav button{
margin:5px;
padding:8px 14px;
background:#222;
border:1px solid #444;
color:#eee;
border-radius:6px;
}

nav button:hover{
background:#333;
}

section{
display:none;
padding:12px;
}
section.active{display:block}

.orb{
width:100px;
height:100px;
margin:16px auto;
border-radius:50%;
background:#2e2e2e;
border:3px solid #555;
}

.bar{
width:80%;
height:14px;
margin:10px auto;
background:#333;
border-radius:6px;
overflow:hidden;
}
.fill{
height:100%;
width:0%;
background:#9fd3c7;
}

.popup{
display:none;
position:fixed;
bottom:15px;
left:10%;
right:10%;
background:#eee;
color:#000;
padding:10px;
border-radius:8px;
font-weight:bold;
}

.task, .achievement{
background:#222;
border:1px solid #444;
margin:6px auto;
padding:8px;
border-radius:6px;
width:85%;
font-size:.9em;
}

.achievement.unlocked{
background:#2f4f4f;
color:#dff;
}

.tag{
display:inline-block;
padding:5px 10px;
margin:4px;
background:#ccc;
color:#000;
border-radius:6px;
font-size:.8em;
}
</style>
</head>

<body>

<header>FOCUS ARENA ‚Äì CLASSIC</header>

<nav>
<button onclick="show('play')">Play</button>
<button onclick="show('timer')">Timer</button>
<button onclick="show('tasks')">Quests</button>
<button onclick="show('market')">Stats</button>
<button onclick="resetAll()">Reset</button>
</nav>

<div id="popup" class="popup"></div>

<section id="play" class="active">
<div class="orb"></div>
<h2 id="time">00:00</h2>

<button onclick="start()">START</button>
<button onclick="pause()">PAUSE</button>

<p>Level: <span id="lvl">1</span></p>
<p>Combo: <span id="streak">0</span></p>

<div class="bar"><div id="energy" class="fill"></div></div>
<p>XP: <span id="xp">0</span> | Coins: <span id="points">0</span></p>
</section>

<section id="timer">
<input id="tmin" type="number" placeholder="Minutes">
<br><br>
<button onclick="startTimer()">Start Timer</button>
<h2 id="ttime">00:00</h2>
<p id="nightInfo"></p>
</section>

<section id="tasks">
<input id="taskInput" placeholder="New Quest">
<button onclick="addTask()">Add</button>
<div id="taskList"></div>
</section>

<section id="market">
<h3>üèÜ Achievements</h3>
<div id="achievements"></div>

<h3>üéí Owned Tags</h3>
<div id="owned"></div>
</section>

<audio id="bgm" loop src="https://assets.mixkit.co/music/preview/mixkit-serene-view-443.mp3"></audio>

<script>
/* ---------- STATE ---------- */
let min=0,sec=0,timer=null;
let xp=0,level=1,points=0,streak=0;
let owned=[];
let achievements={first:false,combo:false,level:false,coins:false,night:false};

/* ---------- ELEMENTS ---------- */
const popupBox=document.getElementById("popup");
const energy=document.getElementById("energy");
const bgm=document.getElementById("bgm");

/* ---------- UI ---------- */
function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function popup(msg){
popupBox.innerText=msg;
popupBox.style.display="block";
setTimeout(()=>popupBox.style.display="none",1500);
}

/* ---------- FOCUS MODE ---------- */
function start(){
if(timer)return;
bgm.volume=.15;
bgm.play();
timer=setInterval(()=>{
sec++;
if(sec==60){sec=0;min++;gain();}
updateTime();
},1000);
}

function pause(){
clearInterval(timer);
timer=null;
}

function updateTime(){
time.innerText=`${String(min).padStart(2,0)}:${String(sec).padStart(2,0)}`;
}

function gain(){
xp++;points++;streak++;
energy.style.width=(xp/(level*20))*100+"%";

if(min>=5&&!achievements.first)unlock("first");
if(streak>=10&&!achievements.combo)unlock("combo");
if(level>=5&&!achievements.level)unlock("level");
if(points>=50&&!achievements.coins)unlock("coins");

if(xp>=level*20){
xp=0;level++;
popup("Level Up");
}

updateUI();save();
}

/* ---------- TIMER + NIGHT MODE ---------- */
let tm=0,ts=0,tInt=null;
function startTimer(){
tm=parseInt(tmin.value)||0;
ts=0;
clearInterval(tInt);

tInt=setInterval(()=>{
if(tm==0&&ts==0){
clearInterval(tInt);
popup("Time Up");
return;
}
if(ts==0){tm--;ts=59}else ts--;
ttime.innerText=`${String(tm).padStart(2,0)}:${String(ts).padStart(2,0)}`;
},1000);
}

function nightCheck(){
if(new Date().getHours()>=22){
document.body.classList.add("night");
document.getElementById("nightInfo").innerText="üåô Night-Out Mode Active";
if(!achievements.night)unlock("night");
}
}
nightCheck();

/* ---------- TASKS ---------- */
function addTask(){
let v=taskInput.value.trim();
if(!v)return;
let d=document.createElement("div");
d.className="task";
d.innerHTML=`${v} <button onclick="this.parentElement.remove()">‚úî</button>`;
taskList.appendChild(d);
taskInput.value="";
}

/* ---------- ACHIEVEMENTS ---------- */
function unlock(a){
achievements[a]=true;
popup("Achievement Unlocked");
renderAchievements();
save();
}

function renderAchievements(){
achievementsDiv.innerHTML="";
const names={
first:"First Focus (5 min)",
combo:"Combo Master (10)",
level:"Level Grinder (5)",
coins:"Coin Hoarder (50)",
night:"Night Owl (10 PM)"
};
for(let a in achievements){
let d=document.createElement("div");
d.className="achievement"+(achievements[a]?" unlocked":"");
d.innerText=names[a];
achievementsDiv.appendChild(d);
}
}

/* ---------- RESET ---------- */
function resetAll(){
if(!confirm("Reset all progress?"))return;
localStorage.clear();
location.reload();
}

/* ---------- SAVE / LOAD ---------- */
function updateUI(){
xpSpan.innerText=xp;
pointsSpan.innerText=points;
streakSpan.innerText=streak;
lvlSpan.innerText=level;
}

function save(){
localStorage.setItem("focusarena",
JSON.stringify({xp,level,points,streak,owned,achievements})
);
}

function load(){
let d=JSON.parse(localStorage.getItem("focusarena"));
if(!d)return;
({xp,level,points,streak,owned,achievements}=d);
updateUI();renderAchievements();
}

/* ---------- INIT ---------- */
const xpSpan=xp,pointsSpan=points,streakSpan=streak,lvlSpan=lvl;
const achievementsDiv=document.getElementById("achievements");

load();renderAchievements();
</script>

</body>
</html>
